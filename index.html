<h1>Safe Gauge </h1>
<p>  Firmware updater and IOT Dashboard</p>
<a href="#" id="click"> Connect to USB!</a>
<script src="serial.js"></script>

<script>
serial.requestPort = function(){
  const filters = [
    {'vendorId': 0x2341}
  ];
  return navigator.usb.requestDevice({'filters':filters}).then(
    device => new serial.Port(device)
  );
}
var port
var connectButton = document.getElementById('click')
var textDecoder = new TextDecoder()
var number = 67
connectButton.addEventListener('click', function()
{
  if(port){
    connectButton.textContent = 'Connect to Data Link'
    port.disconnect()
    port = null
  }
  else {
    serial.requestPort().then(selectedPort => {
      port = selectedPort
      port.connect().then(() => {
        console.log('Connected!')
        connectButton.textContent = 'Disconnect'
        port.onReceive = data => {
          console.log(textDecoder.decode(data))
          document.getElementById("file").innerHTML = textDecoder.decode(data);
        }
        port.onReceiveError = error => {console.log('Receive error: '+ error)}
      }, error => {console.log('Connection error: '+ error) })
    }).catch(error =>{console.log('Connection error: ' + error) })
  }
})
</script>

<p><label for="file">File progress:</label> <progress id="file" value="number" max="100"> 70% </progress></p>

<p id="num"></p> <p><button onclick = "subtractor()">Minus 1</button></p>
 <script> 
   var x = 5 
  
   function subtractor(){
      x = x-1; 
      document.getElementById("num").innerHTML = x; 
    }; 
</script>
