<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <script src="jquery.min.js" type="text/javascript"></script>
        <script src="mqttws31.js" type="text/javascript"></script>
        <title>SA GAUGE REMOTE ACCESS</title>
        <script type="text/javascript">
// Create a client instance: Broker, Port, Websocket Path, Client ID
client = new Paho.MQTT.Client("iot.eclipse.org", Number(80), "/ws", "clientId");

// set callback handlers
client.onConnectionLost = function (responseObject) {
    console.log("Connection Lost: "+responseObject.errorMessage);
}

client.onMessageArrived = function (message) {
  console.log("Message Arrived: "+message.payloadString);
}

// Called when the connection is made
function onConnect(){
	console.log("Connected!");
}

// Connect the client, providing an onConnect callback
client.connect({
	onSuccess: onConnect
});
        </script>
    </head>
    <body>
        <button onclick="client.connect(options);">1. Connec</button>
        <button onclick="client.subscribe('testtopic/#', {qos: 2}); alert('Subscribed');">2. Subscribe</button>
        <button onclick="publish('Hello Foo !','testtopic/bar',2);">3. Publish</button>
        <button onclick="client.disconnect();">(4. Disconnect)</button>
        <div id="messages"></div>
    </body>
</html>
